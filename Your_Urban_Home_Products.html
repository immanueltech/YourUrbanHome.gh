<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="description" content="Experience quality without the hefty price tag!">
  <meta name="keywords"
    content="Your Urban Home, Home, Products,Toiletries, Fragrances, Office Cleaning, Home Cleaning Essentials">
  <meta name="author" content="Immanueltech">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YourUrbanHomeProducts.gh</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .styled-hr {
      border: 0;
      height: 2px;
      background: goldenrod;
      margin: 20px 0;
    }

    a {
      text-decoration: none;
      color: brown;
      font-weight: bold;
      padding: 10px 20px;
      border: 2px solid brown;
      border-radius: 5px;
      transition: background-color 0.3s, color 0.3s;
    }

    a:hover {
      color: white;
      background-color: goldenrod;
    }

    .contact-us {
      text-align: center;
      margin-top: 20px;
      padding: 20px;
      background-color: papayawhip ; /* Changed background color */
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .contact-us img {
      width: 30px;
      vertical-align: middle;
    }

    .contact-us p {
      margin: 5px 0;
    }

    .catalog-section {
      margin-bottom: 20px;
    }

    .catalog-section h3 {
      text-align: left;
    }

    .product {
      border: 1px solid #ccc;
      padding: 10px;
      margin: 10px;
      border-radius: 5px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      width: calc(33.333% - 20px);
      box-sizing: border-box;
    }

    .product img {
      max-width: 250px;
      display: block;
      margin-bottom: 10px;
    }

    .product-container {
      display: flex;
      flex-wrap: wrap;
    }

    .cart {
      margin-top: 20px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      background-color: white;
    }

    .cart h3 {
      text-align: center;
      color: hsl(43, 74%, 49%);
    }

    .cart ul {
      list-style-type: none;
      padding: 0;
    }

    .cart ul li {
      margin-bottom: 10px;
    }

    .cart button {
      margin-left: 10px;
      padding: 5px 10px;
      border: none;
      border-radius: 3px;
      background-color: brown;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s, color 0.3s;
    }

    .cart button:hover {
      background-color: goldenrod;
      color: white;
    }

    @media (max-width: 600px) {
      .product {
        width: 90%;
        margin: 10px auto;
        padding: 10px 5px;
      }

      .product img {
        max-width: 80%;
      }

      .product-container {
        flex-direction: column;
        align-items: center;
        margin: 0 auto;
      }

      .catalog-section h3 {
        text-align: center;
      }

      .cart,
      .comments {
        margin: 10px;
        padding: 10px;
      }

      .cart h3,
      .comments h3 {
        font-size: 1.2em;
      }

      .contact-us {
        margin: 10px;
        padding: 10px;
        width: 100%; /* Ensure full width on smaller devices */
        box-sizing: border-box; /* Include padding and border in the element's total width and height */
      }

      .contact-us p {
        margin: 10px 0;
        font-size: 14px; /* Adjust font size for better readability */
      }

      #comment-text {
        width: 100%;
      }

      #comment-list li {
        padding: 5px;
      }

      #comment-list li ul {
        padding-left: 10px;
      }
    }

    .comments {
      margin-top: 20px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      background-color: white;
    }

    .comments h3 {
      text-align: center;
      color: hsl(43, 74%, 49%);
    }

    #comment-form {
      text-align: center;
      margin-bottom: 20px;
    }

    #comment-text {
      width: 80%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    #comment-list {
      list-style-type: none;
      padding: 0;
    }

    #comment-list li {
      margin-bottom: 10px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      background-color: #f9f9f9;
    }

    #comment-list li ul {
      margin-top: 10px;
      padding-left: 20px;
    }

    #comment-list li ul li {
      background-color: #dbdada;
    }

    .search-container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin: 20px;
    }

    .search-container input[type="text"] {
      flex: 1;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      margin-right: 10px;
    }

    .search-container button {
      padding: 10px 20px;
      border: 2px solid brown;
      border-radius: 5px;
      background-color: goldenrod;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s, color 0.3s;
    }

    .search-container button.back-button {
      background-color: brown;
    }

    .search-container button:hover {
      background-color: white;
      color: brown;
    }

    @media (max-width: 600px) {
      .search-container {
        flex-direction: column;
        align-items: stretch;
      }

      .search-container input[type="text"] {
        margin-right: 0;
        margin-bottom: 10px;
      }

      .search-container button {
        width: 100%;
        margin-bottom: 10px;
      }

      .search-container button.back-button {
        margin-bottom: 0;
      }
    }

    .comment-item {
      margin-bottom: 10px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      background-color: #f9f9f9;
    }

    .comment-item strong {
      display: block;
      margin-bottom: 5px;
      color: #333;
      font-size: 1.1em;
    }

    .comment-item p {
      margin: 0;
      color: #555;
    }

    .comment-item button {
      margin-top: 5px;
      padding: 5px 10px;
      border: none;
      border-radius: 3px;
      background-color: goldenrod;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s, color 0.3s;
    }

    .comment-item button:hover {
      background-color: brown;
      color: white;
    }

    .read-all-comments {
      display: block;
      margin: 20px auto;
      padding: 10px 20px;
      border: 2px solid brown;
      border-radius: 5px;
      background-color: goldenrod;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s, color 0.3s;
      text-align: center;
      font-weight: bold;
      font-size: 1em;
    }

    .read-all-comments:hover {
      background-color: white;
      color: brown;
    }

    .payment {
      margin-top: 20px;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      background-color: white;
      max-width: 500px; /* Limit the width */
      margin-left: auto;
      margin-right: auto;
    }

    .payment h3 {
      color: goldenrod;
      text-align: left;
      display: flex;
      align-items: center;
    }

    .payment h3 img {
      margin-left: 10px;
    }

    .payment form {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }

    .payment label {
      margin-top: 10px;
      font-weight: bold;
    }

    .payment input[type="text"] {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      margin-top: 5px;
    }

    .payment button {
      margin-top: 20px;
      padding: 10px 20px;
      border: 2px solid goldenrod;
      border-radius: 5px;
      background-color: goldenrod;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s, color 0.3s;
    }

    .payment button:hover {
      background-color: white;
      color: goldenrod;
    }
  </style>
  <script src="https://apis.google.com/js/platform.js" async defer></script>
  <meta name="google-signin-client_id" content="YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com">
</head>

<body style="background-color: seashell">
  <h1 style="color: goldenrod; text-align: center; font-family: 'Arial', sans-serif; font-size: 3em; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);">YOUR URBAN HOME</h1>
  <br>
  <hr class="styled-hr">
  <p style="color: slategray; text-align: center; margin-inline:50px">
    <span style="font-size: larger; font-weight: bold">Experience quality</span> <i>without</i> the <span
      style="font-size: larger; font-weight: bold">hefty price tag!</span>
  </p>
  <hr class="styled-hr">
  
  <div class="search-container">
    <input type="text" id="search-bar" placeholder="Search products...">
    <button onclick="searchProducts()">Search</button>
    <button class="back-button" onclick="resetSearch()">Back</button>
  </div>
 
  <br>
  <a href="index.html">Home</a>

  <header>
    <!-- Add insignia here -->
    <div style="text-align: center; margin: 20px 0;">
      <img src="istockphoto-1128229893-612x612.jpg" style="width: 150px; height: auto; border: 2px solid goldenrod; border-radius: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);">
      <!--<h2 style="color: goldenrod; margin: 10px 0;">Shop Our Products</h2> -->
    </div>
    <p style="text-align: center; color: green">
      <img src="https://img.icons8.com/ios-filled/50/000000/phone.png" alt="Phone Icon" style="width: 20px; vertical-align: middle;"> Call to Order: <a href="tel:+233598323235" style="color: green">(+233) 598323235</a>
    </p>
    <div id="sales-catalog"></div>
  </header>

  <main>
    <br>
    <section id="home-fragrances" class="catalog-section">
      <h3>Home Fragrances</h3>
      <div class="product-container">
        <div class="product">
          <img src="49cc75703d78d984962c8e6abe3750a9.jpg" alt="Fragrance 1">
          <h4>Fragrance 1</h4>
          <p>Description of Fragrance 1</p>
          <p>Price: GH₵1</p>
          <button onclick="addToCart('Fragrance 1', 1)">
            Add to Cart
          </button>
        </div>
        <div class="product">
          <img src="f23643769a7475bbc4f829abaef37648.jpg" alt="Fragrance 1">
          <h4>Fragrance 2</h4>
          <p>Description of Fragrance 2</p>
          <p>Price: GH₵2</p>
          <button onclick="addToCart('Fragrance 2', 2)">
            Add to Cart
          </button>
        </div>
        <!-- Add more home fragrances as needed -->
      </div>
    </section>

    <section id="household-cleaning" class="catalog-section">
      <h3>Household Cleaning Essentials</h3>
      <div class="product-container">
        <div class="product">
          <img src="647eca297ab68a3ef3c38d2ed47dd2ce.jpg" alt="Cleaning Product 1">
          <h4>Cleaning Product 1</h4>
          <p>Description of Cleaning Product 1</p>
          <p>Price: GH₵3</p>
          <button onclick="addToCart('Cleaning Product 1', 3)">
            Add to Cart
          </button>
        </div>
        <div class="product">
          <img src="de0fcec1a0566613259d39d54bfe05ca.jpg" alt="Cleaning Product 1">
          <h4>Cleaning Product 2</h4>
          <p>Description of Cleaning Product 2</p>
          <p>Price: GH₵4</p>
          <button onclick="addToCart('Cleaning Product 2', 4)">
            Add to Cart
          </button>
        </div>
        <!-- Add more household cleaning products as needed -->
      </div>
    </section>

    <section id="other-products" class="catalog-section">
      <h3>Other Products</h3>
      <div class="product-container">
        <div class="product">
          <img src="dfe685b0b003f8d64cee54acf98dfb5c.jpg" alt="Product 1">
          <h4>Product 1</h4>
          <p>Description of Product 1</p>
          <p>Price: GH₵5</p>
          <button onclick="addToCart('Other Product 1', 5)">
            Add to Cart
          </button>
        </div>
        <div class="product">
          <img src="de7d11bb4dbbae99884aa6f301b1ac18.jpg" alt="Product 1">
          <h4>Other Product 2</h4>
          <p>Description of Product 2</p>
          <p>Price: GH₵6</p>
          <button onclick="addToCart('Other Product 2', 6)">
            Add to Cart
          </button>
        </div>
        <!-- Add more other products as needed -->
      </div>
    </section>

    <!-- Cart Section -->
    <section class="cart">
      <h3>Your Cart <img src="istockphoto-1128229893-612x612.jpg" style="width: 30px; height: auto; vertical-align: middle; border: 1px solid goldenrod; border-radius: 5px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);"></h3>
      <ul id="cart-items">
        <!-- Cart items will be dynamically added here -->
      </ul>
      <p id="cart-total-items">Total Items: 0</p>
      <p id="cart-total-price">Total Price: GH₵0.00</p>
      <p style="text-align: center;">
        <a href="tel:+233598323235" style="color: green; text-decoration: none;">
          <img src="https://img.icons8.com/ios-filled/50/000000/phone.png" alt="Phone Icon"
            style="vertical-align: middle; width: 20px; height: 20px;">
          Call to Order: (+233) 598323235
        </a>
      </p>
    </section>

    <!-- Mobile Money Payment Section -->
     <br>
    <section class="payment">
      <h3 style="color: goldenrod; text-align: left">
        Mobile Money Payment
        <img src="mtn-icon-512x512-jvl0inah.png"  style="width: 30px; height: auto; vertical-align: middle;">
        <img src="Telcel-White.png" style="width: 30px; height: auto; vertical-align: middle;">
        <img src="AirtelTigo-rebrands-as-AT.jpg" style="width: 30px; height: auto; vertical-align: middle;">
      </h3>
      <form id="payment-form">
        <label for="mobile-number">Mobile Number:</label>
        <input type="text" id="mobile-number" name="mobile-number" required><br>
       <br>
        <label for="amount">Amount (GH₵):</label>
        <input type="text" id="amount" name="amount" readonly><br>
        <br>
        <button type="button" onclick="processPayment()">Pay Now</button>
      </form>
    </section>

    <!-- Comment Section -->
    <section class="comments">
      <h3>Comments</h3>
      <form action="https://api.web3forms.com/submit" method="POST" class="comment-form">
        <input type="hidden" name="access_key" value="2c3d5cec-a628-4162-a11f-7ee14d3f7029">
        <textarea id="comment-text" rows="4" cols="50" placeholder="Leave your comment here..."></textarea><br>
        <button type="button" onclick="addComment()">Submit</button>
      </form>
      <ul id="comment-list">
        <!-- Comments will be dynamically added here -->
      </ul>
      <button id="read-all-comments" onclick="toggleComments()" style="display: none;">Read all comments</button>
      <div class="g-signin2" data-onsuccess="onSignIn"></div>
    </section>
  </main>
  <script>
    let totalItems = 0;
    let totalPrice = 0;
    let userName = 'Anonymous';

    function onSignIn(googleUser) {
      const profile = googleUser.getBasicProfile();
      userName = profile.getName() || 'Anonymous';
    }

    function addToCart(productName, productPrice) {
      const cartItems = document.getElementById("cart-items");
      const listItem = document.createElement("li");
      listItem.innerHTML = `${productName} - GH₵${productPrice} <button onclick="removeFromCart(this, ${productPrice})">Remove</button>`;
      cartItems.appendChild(listItem);

      totalItems++;
      totalPrice += productPrice;
      document.getElementById("cart-total-items").textContent = `Total Items: ${totalItems}`;
      document.getElementById("cart-total-price").textContent = `Total Price: GH₵${totalPrice.toFixed(2)}`;
      document.getElementById("amount").value = totalPrice.toFixed(2);
    }

    function removeFromCart(button, productPrice) {
      const listItem = button.parentElement;
      listItem.remove();

      totalItems--;
      totalPrice -= productPrice;
      document.getElementById("cart-total-items").textContent = `Total Items: ${totalItems}`;
      document.getElementById("cart-total-price").textContent = `Total Price: GH₵${totalPrice.toFixed(2)}`;
      document.getElementById("amount").value = totalPrice.toFixed(2);
    }

    async function addComment() {
      const commentText = document.getElementById("comment-text").value;
      if (commentText.trim() !== "") {
        const commentList = document.getElementById("comment-list");
        const listItem = document.createElement("li");
        listItem.className = "comment-item";
        listItem.innerHTML = `<strong>${userName || 'Anonymous'}</strong><p>${commentText}</p><button onclick="replyComment(this)">Reply</button>`;
        commentList.appendChild(listItem);
        document.getElementById("comment-form").reset();
        
        // Save comment to local storage
        saveComment(commentText, userName || 'Anonymous');
        
        // Send comment to backend server
        try {
          await sendCommentToServer(commentText, userName || 'Anonymous');
          alert('Comment sent successfully');
        } catch (error) {
          alert('Failed to send comment');
          console.error('Error sending comment:', error); // Log error
        }
        checkCommentsLength();
      }
    }

    function replyComment(button) {
      const replyText = prompt("Enter your reply:");
      if (replyText && replyText.trim() !== "") {
        const replyList = document.createElement("ul");
        const replyItem = document.createElement("li");
        replyItem.innerHTML = `<strong>${userName}</strong><p>${replyText}</p>`;
        replyList.appendChild(replyItem);
        button.parentElement.appendChild(replyList);

        // Send reply to backend server
        const commentText = button.parentElement.querySelector('p').textContent;
        sendReplyToServer(commentText, replyText, userName);
      }
    }

    async function sendReplyToServer(commentText, replyText, userName) {
      try {
        const response = await fetch('http://localhost:3000/send-reply', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ comment: commentText, reply: replyText, user: userName })
        });

        if (!response.ok) {
          const errorData = await response.json();
          throw new Error(errorData.error || 'Failed to send reply');
        }
      } catch (error) {
        console.error('Error in sendReplyToServer function:', error); // Log error
        throw error;
      }
    }

    async function processPayment() {
      const mobileNumber = document.getElementById("mobile-number").value;
      
      const amount = document.getElementById("amount").value;

      if (mobileNumber.trim() === "" || amount.trim() === "") {
        alert("Please enter a valid mobile number and amount.");
        return;
      }

      // Simulate a mobile money payment request
      try {
        const response = await fetch('http://localhost:3000/process-payment', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ mobileNumber, amount })
        });

        if (!response.ok) {
          const errorData = await response.json();
          throw new Error(errorData.error || 'Failed to process payment');
        }

        alert(`Payment of GH₵${amount} from mobile number ${mobileNumber} processed successfully.`);
      } catch (error) {
        console.error('Error in processPayment function:', error); // Log error
        alert('Failed to process payment');
      }
    }

    function searchProducts() {
      const searchTerm = document.getElementById("search-bar").value.toLowerCase();
      const products = document.querySelectorAll(".product");

      products.forEach(product => {
        const productName = product.querySelector("h4").textContent.toLowerCase();
        if (productName.includes(searchTerm)) {
          product.style.display = "block";
        } else {
          product.style.display = "none";
        }
      });
    }

    function resetSearch() {
      document.getElementById("search-bar").value = "";
      const products = document.querySelectorAll(".product");
      products.forEach(product => {
        product.style.display = "block";
      });
    }

    function saveComment(commentText, userName) {
      let comments = JSON.parse(localStorage.getItem('comments')) || [];
      comments.push({ text: commentText, user: userName });
      localStorage.setItem('comments', JSON.stringify(comments));
    }

    function loadComments() {
      let comments = JSON.parse(localStorage.getItem('comments')) || [];
      const commentList = document.getElementById("comment-list");
      commentList.innerHTML = ''; // Clear existing comments
      comments.forEach(comment => {
        const listItem = document.createElement("li");
        listItem.className = "comment-item";
        listItem.innerHTML = `<strong>${comment.user || 'Anonymous'}</strong><p>${comment.text}</p><button onclick="replyComment(this)">Reply</button>`;
        commentList.appendChild(listItem);
      });
      checkCommentsLength();
    }

    function checkCommentsLength() {
      const commentList = document.getElementById("comment-list");
      const comments = commentList.querySelectorAll("li");
      if (comments.length > 3) {
        for (let i = 3; i < comments.length; i++) {
          comments[i].style.display = "none";
        }
        document.getElementById("read-all-comments").style.display = "block";
      } else {
        // Always display the button for testing
        document.getElementById("read-all-comments").style.display = "block";
      }
    }

    function toggleComments() {
      const commentList = document.getElementById("comment-list");
      const comments = commentList.querySelectorAll("li");
      comments.forEach(comment => {
        comment.style.display = "block";
      });
      document.getElementById("read-all-comments").style.display = "none";
    }

    window.onload = function() {
      loadComments();
    };

    async function sendEmail(commentText, userName) {
      try {
        const response = await fetch('send_comment.php', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ comment: commentText, user: userName })
        });

        if (!response.ok) {
          const errorData = await response.json();
          throw new Error(errorData.error || 'Failed to send comment');
        }
      } catch (error) {
        console.error('Error in sendEmail function:', error); // Log error
        throw error;
      }
    }
  </script>

  <!-- Contact Us Section -->
  <div class="contact-us">
    <h2>Contact Us</h2>
    <p>
      <img src="https://th.bing.com/th/id/OIP.oXKWfypMEAC8DMHWoHgo_wHaEK?w=272&h=180&c=7&r=0&o=5&pid=1.7"
        alt="Instagram Logo">
      Your_UrbanHome_
    </p>
    <p>
      <img src="https://img.icons8.com/ios-filled/50/000000/address.png" alt="Address Icon"
        style="width: 20px; vertical-align: middle;">
      <strong>Address:</strong> A.M Nyame Avenue,Takoradi-Ghana
    </p>
    <p>
      <img src="https://img.icons8.com/ios-filled/50/000000/phone.png" alt="Phone Icon"
                style="width: 20px; vertical-align: middle;">
                <strong>Mobile or <img src="OIP.jpg" alt="WhatsApp Icon" style="width: 35px; vertical-align: middle;"> Whatsapp:</strong> (+233) 598323235
        </p>
        <p>
            <img src="https://img.icons8.com/ios-filled/50/000000/email.png" alt="Email Icon"
                style="width: 20px; vertical-align: middle;">
            <strong>Email:</strong> yoururbanhome23@gmail.com
        </p>
      </div>
      
  <!-- Footer Section -->
  <footer class="footer-background">
    <div class="footer-content">
      <p>&copy; Your Urban Home 2023.</p>
    </div>
  </footer>
</body>

</html>